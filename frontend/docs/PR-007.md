# PR-007 — Linear-First Overview (Domain & Contract Adjustments)

## Goal

Shift the product to a **linear-first scanning model** while keeping the architecture stable and incremental.

This PR introduces *no new widgets* and *no visual changes yet*. It prepares contracts, naming, and boundaries so that upcoming UI PRs can implement linear previews cleanly.

---

## Scope

**Included**

* Explicitly model the concept of *series view mode* (line vs candles)
* Clarify intended default behavior (line for overview, candles for deep dive)
* Adjust naming where needed to avoid candle-centric assumptions

**Explicitly Excluded**

* No new UI widgets
* No chart rendering changes
* No backend API changes
* No persistence of user preferences

---

## Design Principles

* Linear view is a **first-class concept**, not a UI hack
* Backend remains agnostic of rendering
* Domain language should not bias toward candles
* Changes must be backward-compatible

---

## Changes

### 1. Introduce `SeriesViewMode`

Create a shared enum representing how a time series is *intended to be viewed*.

```dart
enum SeriesViewMode {
  line,
  candles,
}
```

Notes:

* This enum lives in **frontend domain / presentation boundary**
* It does *not* affect backend contracts
* It is intentionally simple (no indicators, no variants)

---

### 2. Default View Mode Rules

Document and codify defaults:

* **Overview screen** → `SeriesViewMode.line`
* **Detail / deep-dive screen** → `SeriesViewMode.candles`

These defaults:

* are hardcoded for now
* will become configurable in a later PR

---

### 3. Naming Neutralization

Audit existing frontend naming for candle bias.

Examples:

* `CandlePreviewWidget` → `SeriesPreviewWidget`
* `MiniCandleChart` → `MiniChart`

Rules:

* Domain & presentation layers should prefer *series* over *candle*
* Candle-specific terms are allowed **only** in rendering implementations

No functional changes — naming only.

---

### 4. Rendering Boundary (Interface Only)

Introduce a rendering abstraction without implementations yet:

```dart
abstract class SeriesChartRenderer {
  Widget build(
    BuildContext context, {
    required CandleSeries series,
    required SeriesViewMode viewMode,
  });
}
```

Notes:

* No concrete renderers in this PR
* This exists solely to establish the seam

---

## Tests

### Required

* Unit test for `SeriesViewMode` default usage (overview vs detail)
* Compilation-level test ensuring new interface is wired but unused

### Explicitly Not Required

* Golden tests
* Widget tests
* Rendering assertions

---

## Acceptance Criteria

PR-007 is complete when:

* `SeriesViewMode` exists and is used consistently
* No UI output changes occur
* No backend code is touched
* Naming no longer assumes candles by default
* Future PRs can add line rendering without refactors

---

## Follow-ups

Planned next PRs:

* **PR-008** — Line chart renderer (overview)
* **PR-009** — Candle chart renderer (detail view)
* **PR-010** — Overview screen widget composition

---

## Non-Goals

* Indicator support
* User toggles
* Performance optimizations
* Backend changes

This PR is about **intentional direction**, not features.
