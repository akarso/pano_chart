# PR-003 — GetCandleSeries Frontend Use Case

## Purpose

Introduce the **frontend application use case** responsible for fetching candle series data via the API client port defined in `frontend/PR-002.md`.

This PR mirrors the backend `GetCandleSeries` use case conceptually, while remaining purely frontend-facing.

No UI or HTTP implementation is introduced.

---

## References

* `AGENTS.md` — global collaboration rules
* `COMMON.md` — shared semantics
* `frontend/PR-002.md` — API client port & DTOs
* `docs/PR-011.md` — frozen backend API contract

---

## Scope (Hard Lock)

### ✅ Included

* Frontend application use case interface
* Use case implementation delegating to API port
* Input parameter object
* Tests defining expected behavior

### ❌ Excluded

* HTTP client implementation
* UI widgets
* State management
* Caching

If it renders data or touches Flutter widgets, it does not belong here.

---

## Folder Structure

```
/frontend/lib/
  features/candles/
    application/
      get_candle_series.dart
      get_candle_series_input.dart

/frontend/test/
  features/candles/application/
```

---

## Use Case Responsibilities

### GetCandleSeries

Responsibilities:

* Accept validated input
* Translate input to `CandleRequest`
* Delegate execution to `CandleApi`
* Return `CandleSeriesResponse`

Constraints:

* No knowledge of HTTP or JSON
* No side effects
* No caching

---

## Input Object

### GetCandleSeriesInput

Fields:

* `symbol`
* `timeframe`
* `from`
* `to`

Rules:

* Required at construction
* No defaults
* No parsing logic

---

## Error Handling

* Errors are propagated as-is from the API port
* No retry or transformation logic

---

## Testing Requirements

### Required Test Cases

* `GetCandleSeries_delegatesToApi`
* `GetCandleSeries_returnsApiResponse`
* `GetCandleSeries_propagatesFailure`

Tests must use a **fake CandleApi**.

---

## Implementation Constraints

* Use constructor injection
* No static methods
* No global state

---

## Definition of Done (PR-003)

PR-003 is considered **done** only when **all** conditions below are met:

* [ ] Use case interface defined
* [ ] Implementation delegates only
* [ ] Input object is immutable
* [ ] All tests pass
* [ ] No UI or HTTP code exists
* [ ] Static analysis passes
* [ ] PR is reviewable in under 20 minutes

---

## Explicit Non-Goals

* No pagination
* No batching

---

## Reviewer Checklist

Reviewer must confirm:

* Use case is transport-agnostic
* No logic creep beyond delegation
* API port is the only dependency

---

## Guiding Principle

Frontend application logic should be boring and predictable.
